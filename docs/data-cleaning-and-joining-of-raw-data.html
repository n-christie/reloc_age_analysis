<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data cleaning and joining of raw data | Reloc-Age</title>
  <meta name="description" content="Description and intial analysis for the Reloc-Age project" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data cleaning and joining of raw data | Reloc-Age" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description and intial analysis for the Reloc-Age project" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data cleaning and joining of raw data | Reloc-Age" />
  
  <meta name="twitter:description" content="Description and intial analysis for the Reloc-Age project" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="description-of-data-sets-from-scb.html"/>
<link rel="next" href="descriptives-by-age-and-sex.html"/>
<script src="libs/header-attrs-2.14.2/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reloc-Age</a></li>

<li class="divider"></li>
<li><a href="index.html#about" id="toc-about"><span class="toc-section-number">1</span> About<span></span></a></li>
<li><a href="research-questions.html#research-questions" id="toc-research-questions"><span class="toc-section-number">2</span> Research questions<span></span></a></li>
<li><a href="overview-of-registers.html#overview-of-registers" id="toc-overview-of-registers"><span class="toc-section-number">3</span> Overview of Registers<span></span></a></li>
<li><a href="description-of-data-sets-from-scb.html#description-of-data-sets-from-scb" id="toc-description-of-data-sets-from-scb"><span class="toc-section-number">4</span> Description of data sets from SCB<span></span></a>
<ul>
<li><a href="description-of-data-sets-from-scb.html#population" id="toc-population"><span class="toc-section-number">4.1</span> Population<span></span></a></li>
<li><a href="description-of-data-sets-from-scb.html#lisa" id="toc-lisa"><span class="toc-section-number">4.2</span> Lisa<span></span></a></li>
<li><a href="description-of-data-sets-from-scb.html#housing" id="toc-housing"><span class="toc-section-number">4.3</span> Housing<span></span></a></li>
</ul></li>
<li><a href="data-cleaning-and-joining-of-raw-data.html#data-cleaning-and-joining-of-raw-data" id="toc-data-cleaning-and-joining-of-raw-data"><span class="toc-section-number">5</span> Data cleaning and joining of raw data<span></span></a>
<ul>
<li><a href="data-cleaning-and-joining-of-raw-data.html#scb-data" id="toc-scb-data"><span class="toc-section-number">5.1</span> SCB data<span></span></a></li>
</ul></li>
<li><a href="descriptives-by-age-and-sex.html#descriptives-by-age-and-sex" id="toc-descriptives-by-age-and-sex"><span class="toc-section-number">6</span> Descriptives by Age and Sex<span></span></a></li>
<li><a href="housing-data.html#housing-data" id="toc-housing-data"><span class="toc-section-number">7</span> Housing data<span></span></a>
<ul>
<li><a href="housing-data.html#specific-data-considerations" id="toc-specific-data-considerations"><span class="toc-section-number">7.1</span> Specific data considerations<span></span></a>
<ul>
<li><a href="housing-data.html#identifying-partners" id="toc-identifying-partners"><span class="toc-section-number">7.1.1</span> Identifying partners<span></span></a></li>
<li><a href="housing-data.html#recoding-varaibles" id="toc-recoding-varaibles"><span class="toc-section-number">7.1.2</span> Recoding varaibles<span></span></a></li>
<li><a href="housing-data.html#indentifying-relocations" id="toc-indentifying-relocations"><span class="toc-section-number">7.1.3</span> Indentifying relocations<span></span></a></li>
<li><a href="housing-data.html#indentifying-change-in-kommun" id="toc-indentifying-change-in-kommun"><span class="toc-section-number">7.1.4</span> Indentifying change in kommun<span></span></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reloc-Age</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-cleaning-and-joining-of-raw-data" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Data cleaning and joining of raw data<a href="data-cleaning-and-joining-of-raw-data.html#data-cleaning-and-joining-of-raw-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>As illustrated above, the data from RELOC-AGE is comprised of from several registers and sources. In order to arrive at the final data set, a number of data cleaning actions, multiple joins, and many quality control steps have been taken to insure reliable analysis and data integrity. This section details steps taken.</p>
<div id="scb-data" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> SCB data<a href="data-cleaning-and-joining-of-raw-data.html#scb-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With data covering about 3 million individuals over decades and with a multitude of variables spread out across hundreds of very large files, the computational effort to complete these tasks are very time intensive, often taking hours for a large merge, with progress occasionally hindered by computational restrictions and small errors which arise in the data cleaning process. With this in mind, detailed documentation, contained both here and alongside code used in the data cleaning, is prioritized to reduce any need to repeat these time-intensive processes.</p>
<p>As a first step, the following initial data cleaning is performed:</p>
<ul>
<li>Raw data files are organized into folder structure where each folder contains all data from a particular data set.</li>
<li>An individual script for each data set is written in R that reads the raw yearly .txt files and merges files into one data set.</li>
<li>When required, a variable “year” is generated in the joined data set specifying which year the data originates from( taken from the name of the .txt file).</li>
<li>Variables are renamed into lowercase with spaces and other delimiters transformed into underscores ( _ ) for consistent naming conventions and avoidance of future merge conflicts.</li>
<li>The joined and cleaned data set is saved in the contained folder in both R’s .rds and Stata’s .dta formats.</li>
<li>A README.txt file is created in each folder documenting the process.</li>
</ul>
<p>The result consists of eleven folders each containing a data set’s respective raw data, a documented R merging/cleaning script for full reproducibility, and a merged data set in both R and Stata format to be used in subsequent merging and further analysis.</p>
<p><img src="output/figures/folder_structure.png" width="100%" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="description-of-data-sets-from-scb.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="descriptives-by-age-and-sex.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["reloc_age_analysis.pdf", "reloc_age_analysis.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
